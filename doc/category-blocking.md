# カテゴリブロック制御

広告主は配信許可/拒否しているカテゴリ一覧を保持しています ( `category_blockings.category_id` )。広告主のカテゴリとリクエストに含まれる `category_ids` の積集合のサイズが1以上の場合、
- 広告主のカテゴリ配信タイプが **許可** であれば、広告主が持っている広告は配信 **可能**
- 広告主のカテゴリ配信タイプが **拒否** であれば、広告主が持っている広告は配信 **不可**

積集合のサイズが0の場合、動作が逆になります。つまり、
- 広告主のカテゴリ配信タイプが **許可** であれば、広告主が持っている広告は配信 **不可**
- 広告主のカテゴリ配信タイプが **拒否** であれば、広告主が持っている広告は配信 **可能**

---

## 具体例
- パターン1. category_blocking_type = 0 (許可) の時

リクエストの `category_ids = {1, 3, 10, 15}`  
広告主の `category_blockings = {3, 11, 15, 17}`

このとき積集合は `{3, 15}` となりサイズが1以上なため配信許可されます。一つでもカテゴリが属していれば配信されることに注意してください。


- パターン2. category_blocking_type = 1 (拒否) の時

同じ条件を考えます。

リクエストの `category_ids = {1, 3, 10, 15}`  
広告主の `category_blockings = {3, 11, 15, 17}`

このとき積集合は `{3, 15}` となりサイズが1以上なため配信拒否されます。全てがブロック対象でなくても拒否されることに注意してください。
